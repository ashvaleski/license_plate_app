<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>License Plate Spotlight</title>
  <style>
    body {
      font-family: sans-serif;
      text-align: center;
      margin: 0;
      padding: 20px;
      background: #f4f4f4;
      overflow: hidden; /* prevent scrolling */
    }

    select, button {
      font-size: 1rem;
      padding: 0.5rem 1rem;
      margin-top: 10px;
    }

    #spotlight-img {
      margin-top: 20px;
      max-width: 100vw;
      max-height: 80vh; /* leave some room for dropdown/button */
      display: none; /* hide initially */
      margin-left: auto;
      margin-right: auto;
      object-fit: contain;
      transform: rotate(0deg);
    }
  </style>
</head>
<body>
  <h2>License Plate Spotlight</h2>

  <label for="state">Select a state:</label>
  <select id="state">
    <option value="" selected disabled>Select a state...</option>
    {% for state in states %}
      <option value="{{ state }}">{{ state }}</option>
    {% endfor %}
  </select>
  <button id="show-btn">Show Plates</button>

  <img id="spotlight-img" src="" alt="Spotlight Image">

  <script>
    const button = document.getElementById("show-btn");
    const select = document.getElementById("state");
    const img = document.getElementById("spotlight-img");

    function updateImage() {
      const state = select.value;
      if (!state) return; // do nothing if no state selected
      img.src = `/get_image?state=${encodeURIComponent(state)}&t=${Date.now()}`;
      img.style.display = "block"; // show image
    }

    button.addEventListener("click", updateImage);

    // Rotate image for desktop if width > 768px
    function rotateImage() {
      if (window.innerWidth > 768) {
        img.style.transform = "rotate(90deg)";
      } else {
        img.style.transform = "rotate(0deg)";
      }
    }

    window.addEventListener("load", rotateImage);
    window.addEventListener("resize", rotateImage);
  </script>
</body>
</html>